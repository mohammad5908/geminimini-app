<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Gemini Center | Premium Store</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Vazirmatn', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'] },
                    colors: {
                        void: '#000000',
                        glass: {
                            light: 'rgba(255, 255, 255, 0.05)',
                            medium: 'rgba(255, 255, 255, 0.08)',
                            heavy: 'rgba(20, 20, 20, 0.8)'
                        },
                        neon: {
                            purple: '#8B5CF6',
                            pink: '#EC4899',
                            cyan: '#06B6D4',
                            gold: '#F59E0B'
                        }
                    },
                    animation: {
                        'blob': 'blob 8s infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1)',
                        'pop-in': 'popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                        'shimmer': 'shimmer 3s linear infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%, 100%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(40px)', opacity: 0 },
                            '100%': { transform: 'translateY(0)', opacity: 1 }
                        },
                        popIn: {
                            '0%': { transform: 'scale(0.8)', opacity: 0 },
                            '100%': { transform: 'scale(1)', opacity: 1 }
                        },
                        shimmer: {
                            'from': { backgroundPosition: '0 0' },
                            'to': { backgroundPosition: '-200% 0' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GEMINI CENTER ELITE - ULTIMATE PRODUCTION VERSION
           Channel: @GeminiCenter_IR
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        * { -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: #000;
            color: #fff;
            overflow-x: hidden;
            user-select: none;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Glassmorphism Ultra */
        .glass-panel {
            background: linear-gradient(180deg, rgba(30, 30, 30, 0.6) 0%, rgba(10, 10, 10, 0.8) 100%);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.06);
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.5);
        }

        .nav-glass {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Gold Gradient Text */
        .text-gold-gradient {
            background: linear-gradient(to bottom, #FCD34D, #F59E0B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 4px rgba(245, 158, 11, 0.3));
        }

        /* Hero Button with Shimmer */
        .hero-btn {
            background: linear-gradient(to right, #7C3AED 0%, #9333EA 20%, #DB2777 40%, #7C3AED 100%);
            background-size: 200% auto;
            box-shadow: 0 0 25px rgba(124, 58, 237, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hero-btn:active {
            transform: scale(0.96);
            box-shadow: 0 0 10px rgba(124, 58, 237, 0.2);
        }

        /* Particles Canvas */
        #particles {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
        }

        /* Custom Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Safe Area */
        .safe-top { padding-top: env(safe-area-inset-top, 20px); }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom, 20px); }

        /* Loading Spinner */
        .spinner-ring {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(139, 92, 246, 0.1);
            border-top-color: #8B5CF6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Fade Transitions */
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s ease;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }

        /* Slide Up Transition */
        .slide-up-enter-active {
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .slide-up-enter-from {
            transform: translateY(100%);
            opacity: 0;
        }

        /* Avatar Glow */
        .avatar-glow {
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.6);
        }
    </style>
</head>
<body class="antialiased min-h-screen">

    <!-- Particles Canvas -->
    <canvas id="particles"></canvas>

    <!-- Animated Background Blobs -->
    <div class="fixed inset-0 z-0 pointer-events-none overflow-hidden">
        <div class="absolute top-[-10%] left-[-20%] w-[500px] h-[500px] bg-neon-purple/20 rounded-full blur-[120px] animate-blob"></div>
        <div class="absolute bottom-[-10%] right-[-20%] w-[400px] h-[400px] bg-neon-pink/10 rounded-full blur-[100px] animate-blob" style="animation-delay: 2s;"></div>
        <div class="absolute top-[40%] left-[40%] w-[350px] h-[350px] bg-neon-cyan/10 rounded-full blur-[100px] animate-blob" style="animation-delay: 4s;"></div>
    </div>

    <!-- Vue App -->
    <div id="app" class="relative z-10 max-w-lg mx-auto min-h-screen flex flex-col">

        <!-- Loading Screen -->
        <transition name="fade">
            <div v-if="loading" class="fixed inset-0 z-50 bg-black flex flex-col items-center justify-center">
                <div class="spinner-ring mb-6"></div>
                <p class="text-[10px] tracking-[0.4em] text-neon-purple font-bold animate-pulse">GEMINI CENTER</p>
                <p class="text-[8px] text-white/30 mt-2 tracking-widest">@GeminiCenter_IR</p>
            </div>
        </transition>

        <!-- Main Content -->
        <div v-else class="flex-1 flex flex-col pb-24 safe-top">

            <!-- Header -->
            <header class="px-6 py-4 flex justify-between items-center animate-slide-up">
                <div class="flex items-center gap-3">
                    <div class="relative cursor-pointer" @click="changeTab('profile')">
                        <img 
                            :src="user.photo_url || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.first_name) + '&background=8B5CF6&color=fff&size=128'" 
                            class="w-11 h-11 rounded-full border-2 border-white/10 object-cover avatar-glow"
                            @error="handleAvatarError"
                        >
                        <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-black rounded-full shadow-[0_0_8px_#22c55e] animate-pulse"></div>
                    </div>
                    <div>
                        <h2 class="text-sm font-bold text-white">{{ user.first_name }}</h2>
                        <div class="flex items-center gap-1.5 mt-0.5">
                            <span class="w-1.5 h-1.5 rounded-full bg-neon-purple animate-pulse"></span>
                            <span class="text-[10px] text-white/50 uppercase tracking-wide font-bold">Premium Shop</span>
                        </div>
                    </div>
                </div>
                <button @click="changeTab('cart')" class="relative w-10 h-10 rounded-full glass-panel flex items-center justify-center text-white/70 hover:text-white transition-all active:scale-95">
                    <i class="fa-solid fa-basket-shopping"></i>
                    <span v-if="cart.length" class="absolute -top-1 -right-1 w-5 h-5 bg-neon-pink text-white text-[10px] font-bold rounded-full flex items-center justify-center border border-black animate-pop-in">
                        {{ cart.length }}
                    </span>
                </button>
            </header>

            <!-- Main Content Area -->
            <main class="px-5 flex-1 relative">

                <!-- Store Tab -->
                <transition name="fade" mode="out-in">
                    <div v-if="activeTab === 'store'" key="store" class="animate-slide-up space-y-6">

                        <!-- Hero Card - Gemini Ultra 3.0 -->
                        <div class="relative w-full rounded-[32px] overflow-hidden p-6 min-h-[220px] flex flex-col justify-between group cursor-pointer border border-neon-purple/20"
                             @click="openModal('gemini_ultra_monthly_ready')">
                            <div class="absolute inset-0 bg-gradient-to-br from-[#2E1065] to-[#000000]"></div>
                            <div class="absolute right-[-20%] top-[-20%] w-[300px] h-[300px] bg-neon-purple/30 rounded-full blur-[60px] animate-pulse-slow"></div>
                            
                            <div class="relative z-10">
                                <div class="flex justify-between items-start">
                                    <span class="px-3 py-1 rounded-full bg-white/10 backdrop-blur border border-white/20 text-[9px] font-bold tracking-widest text-white">FLAGSHIP</span>
                                    <i class="fa-solid fa-gem text-2xl text-white/20 group-hover:text-white/40 transition-colors animate-float"></i>
                                </div>
                                <div class="mt-4">
                                    <h1 class="text-3xl font-black text-white leading-tight">
                                        Gemini<br>
                                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-neon-purple to-neon-pink">Ultra 3.0</span>
                                    </h1>
                                    <p class="text-xs text-white/60 mt-2 max-w-[200px] leading-relaxed">
                                        Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ØªØ±ÛŒÙ† Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ú¯ÙˆÚ¯Ù„ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ­Ù„ÛŒÙ„ ØªØµÙˆÛŒØ±ØŒ ÙˆÛŒØ¯Ø¦Ùˆ Ùˆ Ú©Ø¯Ù†ÙˆÛŒØ³ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡.
                                    </p>
                                </div>
                            </div>
                            
                            <div class="relative z-10 flex items-center justify-between mt-4">
                                <div>
                                    <p class="text-[10px] text-white/40 line-through">2,500,000</p>
                                    <p class="text-xl font-bold text-white">
                                        {{ formatPrice(getPrice('gemini_ultra_monthly_ready')) }} 
                                        <span class="text-[10px] font-normal text-white/50">ØªÙˆÙ…Ø§Ù†</span>
                                    </p>
                                </div>
                                <button class="w-10 h-10 rounded-full bg-white text-black flex items-center justify-center hover:scale-110 transition-transform">
                                    <i class="fa-solid fa-arrow-left -rotate-45"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Categories -->
                        <div class="flex gap-3 overflow-x-auto no-scrollbar pb-2">
                            <button 
                                v-for="cat in categories" 
                                :key="cat.id" 
                                @click="selectedCategory = cat.id"
                                class="px-5 py-2.5 rounded-2xl text-xs font-bold whitespace-nowrap transition-all border"
                                :class="selectedCategory === cat.id ? 'bg-white text-black border-white shadow-lg' : 'bg-glass-light text-white/50 border-white/5'">
                                {{ cat.name }}
                            </button>
                        </div>

                        <!-- Products Grid -->
                        <div class="grid grid-cols-1 gap-4 pb-4">
                            <div 
                                v-for="product in filteredProducts" 
                                :key="product.id"
                                class="glass-panel rounded-2xl p-4 flex items-center gap-4 cursor-pointer relative overflow-hidden group active:scale-[0.98] transition-transform"
                                @click="openModal(product.id)">
                                
                                <div class="w-16 h-16 rounded-xl flex items-center justify-center text-2xl shadow-inner border border-white/5" :class="product.theme">
                                    {{ product.emoji }}
                                </div>
                                
                                <div class="flex-1 min-w-0">
                                    <div class="flex justify-between items-center mb-1">
                                        <h3 class="font-bold text-sm text-white truncate">{{ product.name }}</h3>
                                        <span v-if="product.tag" class="px-1.5 py-0.5 rounded text-[8px] font-bold uppercase bg-white/5 border border-white/10 text-white/70">
                                            {{ product.tag }}
                                        </span>
                                    </div>
                                    <p class="text-[10px] text-white/40 line-clamp-1 mb-2">{{ product.desc }}</p>
                                    <div class="flex justify-between items-end">
                                        <div class="text-gold-gradient font-bold text-base">
                                            {{ formatPrice(product.price) }} 
                                            <span class="text-[9px] text-white/30 font-normal">ØªÙˆÙ…Ø§Ù†</span>
                                        </div>
                                        <div class="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-white/30 group-hover:bg-neon-purple group-hover:text-white transition-all">
                                            <i class="fa-solid fa-plus"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Channel Link -->
                        <a href="https://t.me/GeminiCenter_IR" target="_blank" class="glass-panel rounded-2xl p-4 flex items-center gap-3 hover:border-neon-cyan/50 transition-all border border-white/5">
                            <div class="w-12 h-12 rounded-xl bg-neon-cyan/10 flex items-center justify-center text-neon-cyan text-xl">
                                <i class="fa-brands fa-telegram"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-sm text-white">Ú©Ø§Ù†Ø§Ù„ Ø±Ø³Ù…ÛŒ</h4>
                                <p class="text-[10px] text-white/40 mt-0.5">@GeminiCenter_IR</p>
                            </div>
                            <i class="fa-solid fa-chevron-left text-white/30"></i>
                        </a>

                    </div>
                </transition>

                <!-- Cart Tab -->
                <transition name="fade" mode="out-in">
                    <div v-if="activeTab === 'cart'" key="cart" class="animate-slide-up h-full flex flex-col">
                        <h2 class="text-xl font-bold mb-6 flex items-center gap-2">
                            <i class="fa-solid fa-basket-shopping text-neon-pink"></i> Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
                        </h2>

                        <div v-if="cart.length === 0" class="flex-1 flex flex-col items-center justify-center text-center opacity-50">
                            <i class="fa-solid fa-cart-arrow-down text-6xl mb-4 text-white/20"></i>
                            <p class="text-sm">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>
                            <button @click="activeTab = 'store'" class="mt-4 text-xs text-neon-purple border-b border-neon-purple pb-0.5">
                                Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙØ±ÙˆØ´Ú¯Ø§Ù‡
                            </button>
                        </div>

                        <div v-else class="flex-1 overflow-y-auto no-scrollbar space-y-3 pb-4">
                            <div v-for="(item, idx) in cart" :key="idx" class="glass-panel rounded-xl p-3 flex items-center gap-3">
                                <div class="w-12 h-12 rounded-lg bg-white/5 flex items-center justify-center text-lg">
                                    {{ item.emoji }}
                                </div>
                                <div class="flex-1">
                                    <h4 class="text-sm font-bold">{{ item.name }}</h4>
                                    <p class="text-xs text-neon-gold">{{ formatPrice(item.price) }} ØªÙˆÙ…Ø§Ù†</p>
                                </div>
                                <button @click="removeFromCart(idx)" class="w-8 h-8 rounded-full bg-red-500/10 text-red-500 flex items-center justify-center active:scale-95 transition-transform">
                                    <i class="fa-solid fa-trash text-xs"></i>
                                </button>
                            </div>
                        </div>

                        <div v-if="cart.length > 0" class="mt-auto pt-4 border-t border-white/10">
                            <div class="flex justify-between items-center mb-4">
                                <span class="text-xs text-white/50">Ù…Ø¨Ù„Øº Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª</span>
                                <span class="text-xl font-black text-white">
                                    {{ formatPrice(cartTotal) }} 
                                    <span class="text-xs font-normal">ØªÙˆÙ…Ø§Ù†</span>
                                </span>
                            </div>
                            <button @click="checkout" class="w-full py-4 rounded-xl hero-btn text-white font-bold flex items-center justify-center gap-2" :disabled="processing">
                                <span v-if="!processing">Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‡Ø§ÛŒÛŒ</span>
                                <span v-else class="spinner-ring !w-5 !h-5 !border-2"></span>
                            </button>
                        </div>
                    </div>
                </transition>

                <!-- Profile Tab -->
                <transition name="fade" mode="out-in">
                    <div v-if="activeTab === 'profile'" key="profile" class="animate-slide-up">
                        <div class="glass-panel rounded-3xl p-8 text-center relative overflow-hidden mb-6">
                            <div class="absolute inset-0 bg-gradient-to-b from-neon-purple/10 to-transparent"></div>
                            <img 
                                :src="user.photo_url || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.first_name) + '&background=8B5CF6&color=fff&size=256'" 
                                class="w-24 h-24 rounded-full border-4 border-black mx-auto mb-4 relative z-10 object-cover avatar-glow"
                                @error="handleAvatarError"
                            >
                            <h2 class="text-2xl font-bold relative z-10">{{ user.first_name }}</h2>
                            <p class="text-xs text-white/40 mt-1 font-mono relative z-10">User ID: {{ user.id }}</p>
                        </div>

                        <div class="grid grid-cols-2 gap-3 mb-6">
                            <div class="glass-panel rounded-2xl p-4 text-center">
                                <i class="fa-solid fa-wallet text-neon-gold text-xl mb-2"></i>
                                <p class="text-[10px] text-white/50">Ù…ÙˆØ¬ÙˆØ¯ÛŒ</p>
                                <p class="font-bold text-lg">0</p>
                            </div>
                            <div class="glass-panel rounded-2xl p-4 text-center">
                                <i class="fa-solid fa-box-open text-neon-cyan text-xl mb-2"></i>
                                <p class="text-[10px] text-white/50">Ø³ÙØ§Ø±Ø´Ø§Øª</p>
                                <p class="font-bold text-lg">0</p>
                            </div>
                        </div>

                        <a href="https://t.me/GeminiCenter_IR" target="_blank" class="w-full glass-panel p-4 rounded-xl flex items-center justify-between hover:bg-white/5 transition-colors">
                            <div class="flex items-center gap-3">
                                <i class="fa-brands fa-telegram text-neon-cyan text-xl"></i>
                                <span class="text-sm">Ú©Ø§Ù†Ø§Ù„ Ø±Ø³Ù…ÛŒ Ù…Ø§</span>
                            </div>
                            <i class="fa-solid fa-chevron-left text-xs text-white/30"></i>
                        </a>

                        <button class="w-full glass-panel p-4 rounded-xl flex items-center justify-between hover:bg-white/5 transition-colors mt-3">
                            <div class="flex items-center gap-3">
                                <i class="fa-solid fa-headset text-neon-purple"></i>
                                <span class="text-sm">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</span>
                            </div>
                            <i class="fa-solid fa-chevron-left text-xs text-white/30"></i>
                        </button>
                    </div>
                </transition>

            </main>

            <!-- Bottom Navigation -->
            <nav class="fixed bottom-0 left-0 right-0 nav-glass pb-8 pt-4 px-8 z-30 safe-bottom">
                <div class="flex justify-between items-center max-w-lg mx-auto">
                    <button 
                        @click="changeTab('store')" 
                        class="flex flex-col items-center gap-1 transition-all duration-300 w-16"
                        :class="activeTab === 'store' ? 'text-neon-purple -translate-y-1' : 'text-white/40'">
                        <i class="fa-solid fa-store text-xl" :class="activeTab === 'store' ? 'drop-shadow-[0_0_10px_rgba(139,92,246,0.8)]' : ''"></i>
                        <span class="text-[9px] font-bold">ÙØ±ÙˆØ´Ú¯Ø§Ù‡</span>
                    </button>
                    <button 
                        @click="changeTab('cart')" 
                        class="flex flex-col items-center gap-1 transition-all duration-300 w-16"
                        :class="activeTab === 'cart' ? 'text-neon-purple -translate-y-1' : 'text-white/40'">
                        <i class="fa-solid fa-basket-shopping text-xl" :class="activeTab === 'cart' ? 'drop-shadow-[0_0_10px_rgba(139,92,246,0.8)]' : ''"></i>
                        <span class="text-[9px] font-bold">Ø³Ø¨Ø¯</span>
                    </button>
                    <button 
                        @click="changeTab('profile')" 
                        class="flex flex-col items-center gap-1 transition-all duration-300 w-16"
                        :class="activeTab === 'profile' ? 'text-neon-purple -translate-y-1' : 'text-white/40'">
                        <i class="fa-solid fa-user text-xl" :class="activeTab === 'profile' ? 'drop-shadow-[0_0_10px_rgba(139,92,246,0.8)]' : ''"></i>
                        <span class="text-[9px] font-bold">Ù¾Ø±ÙˆÙØ§ÛŒÙ„</span>
                    </button>
                </div>
            </nav>

        </div>

        <!-- Product Modal -->
        <transition name="slide-up">
            <div v-if="modal.show" class="fixed inset-0 z-50 flex items-end justify-center sm:items-center" @click.self="closeModal">
                <div class="absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity"></div>
                <div class="relative w-full max-w-lg bg-[#111] border-t border-white/10 rounded-t-[32px] sm:rounded-[32px] p-6 shadow-2xl animate-slide-up">
                    <div class="w-12 h-1 bg-white/20 rounded-full mx-auto mb-6"></div>
                    
                    <div class="text-center mb-6">
                        <div class="w-20 h-20 mx-auto rounded-2xl bg-white/5 flex items-center justify-center text-4xl mb-4 border border-white/5 shadow-[0_0_30px_rgba(139,92,246,0.1)]">
                            {{ modal.product.emoji }}
                        </div>
                        <h2 class="text-2xl font-black text-white">{{ modal.product.name }}</h2>
                        <p class="text-xs text-white/50 mt-2 max-w-[80%] mx-auto">{{ modal.product.desc }}</p>
                    </div>

                    <div class="space-y-3 mb-8">
                        <div class="flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5">
                            <i class="fa-solid fa-bolt text-neon-gold"></i>
                            <span class="text-xs text-white/80">ØªØ­ÙˆÛŒÙ„ Ø¢Ù†ÛŒ Ùˆ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©</span>
                        </div>
                        <div class="flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5">
                            <i class="fa-solid fa-shield-halved text-neon-cyan"></i>
                            <span class="text-xs text-white/80">Ø¶Ù…Ø§Ù†Øª Ú©Ø§Ù…Ù„ ØªØ§ Ø¢Ø®Ø±ÛŒÙ† Ø±ÙˆØ²</span>
                        </div>
                    </div>

                    <div class="flex gap-4">
                        <div class="flex-1">
                            <p class="text-[10px] text-white/40">Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ</p>
                            <p class="text-2xl font-black text-gold-gradient">{{ formatPrice(modal.product.price) }}</p>
                        </div>
                        <button @click="buyDirect" class="flex-[2] py-4 rounded-xl hero-btn text-white font-bold text-sm shadow-xl active:scale-95 transition-transform">
                            Ø®Ø±ÛŒØ¯ Ù…Ø³ØªÙ‚ÛŒÙ…
                        </button>
                        <button @click="addToCart(modal.product)" class="w-14 rounded-xl bg-white/10 flex items-center justify-center text-white hover:bg-white/20 transition-colors active:scale-95">
                            <i class="fa-solid fa-cart-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
        </transition>

        <!-- Toast Notification -->
        <transition name="fade">
            <div v-if="toast.show" class="fixed top-6 left-1/2 -translate-x-1/2 z-[60] glass-panel px-6 py-3 rounded-full flex items-center gap-3 shadow-2xl border border-neon-purple/30 safe-top">
                <i class="fa-solid fa-check-circle text-neon-purple"></i>
                <span class="text-xs font-bold">{{ toast.message }}</span>
            </div>
        </transition>

    </div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // GEMINI CENTER ELITE - JAVASCRIPT ENGINE
        // Channel: @GeminiCenter_IR
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                const tg = window.Telegram.WebApp;
                const loading = ref(true);
                const processing = ref(false);
                const activeTab = ref('store');
                const selectedCategory = ref('all');
                
                const user = ref({
                    first_name: 'Ú©Ø§Ø±Ø¨Ø±',
                    id: '---',
                    photo_url: null
                });
                
                const cart = ref([]);
                const modal = ref({ show: false, product: {} });
                const toast = ref({ show: false, message: '' });

                // Products Data
                const products = ref([
                    { 
                        id: 'gemini_ultra_monthly_ready', 
                        name: 'Gemini Ultra 3.0', 
                        desc: 'Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ØªØ±ÛŒÙ† Ù…Ø¯Ù„ Ú¯ÙˆÚ¯Ù„', 
                        price: 1850000, 
                        emoji: 'ğŸš€', 
                        category: 'ready', 
                        theme: 'bg-neon-purple/10 text-neon-purple', 
                        tag: 'NEW' 
                    },
                    { 
                        id: 'gemini_pro_monthly_ready', 
                        name: 'Gemini Pro Ù…Ø§Ù‡Ø§Ù†Ù‡', 
                        desc: 'Ø§Ú©Ø§Ù†Øª Ø¢Ù…Ø§Ø¯Ù‡ â€¢ Û³Û° Ø±ÙˆØ²Ù‡', 
                        price: 380000, 
                        emoji: 'ğŸ’', 
                        category: 'ready', 
                        theme: 'bg-neon-purple/10 text-neon-purple', 
                        tag: 'POPULAR' 
                    },
                    { 
                        id: 'gemini_pro_yearly_ready', 
                        name: 'Gemini Pro Ø³Ø§Ù„Ø§Ù†Ù‡', 
                        desc: 'Ø§Ú©Ø§Ù†Øª Ø¢Ù…Ø§Ø¯Ù‡ â€¢ ÛŒÚ©Ø³Ø§Ù„Ù‡', 
                        price: 1280000, 
                        emoji: 'ğŸ‘‘', 
                        category: 'ready', 
                        theme: 'bg-neon-pink/10 text-neon-pink', 
                        tag: '-30%' 
                    },
                    { 
                        id: 'gemini_pro_monthly_personal', 
                        name: 'Ø´Ø§Ø±Ú˜ Ø§ÛŒÙ…ÛŒÙ„ Ø´Ø®ØµÛŒ', 
                        desc: 'ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø±ÙˆÛŒ Gmail Ø´Ù…Ø§', 
                        price: 300000, 
                        emoji: 'ğŸ“§', 
                        category: 'personal', 
                        theme: 'bg-neon-cyan/10 text-neon-cyan', 
                        tag: 'LEGAL' 
                    }
                ]);

                const categories = [
                    { id: 'all', name: 'Ù‡Ù…Ù‡' },
                    { id: 'ready', name: 'Ø§Ú©Ø§Ù†Øª Ø¢Ù…Ø§Ø¯Ù‡' },
                    { id: 'personal', name: 'Ø´Ø®ØµÛŒ' }
                ];

                // Computed
                const filteredProducts = computed(() => {
                    let list = products.value.filter(p => p.id !== 'gemini_ultra_monthly_ready');
                    if (selectedCategory.value !== 'all') {
                        list = list.filter(p => p.category === selectedCategory.value);
                    }
                    return list;
                });

                const cartTotal = computed(() => {
                    return cart.value.reduce((sum, item) => sum + item.price, 0);
                });

                // Helpers
                const formatPrice = (n) => Number(n).toLocaleString('fa-IR');
                
                const haptic = (style) => {
                    if (tg.HapticFeedback) {
                        tg.HapticFeedback.impactOccurred(style);
                    }
                };

                const showToast = (msg) => {
                    toast.value = { show: true, message: msg };
                    setTimeout(() => toast.value.show = false, 2500);
                };

                const handleAvatarError = (e) => {
                    e.target.src = 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.value.first_name) + '&background=8B5CF6&color=fff&size=256';
                };

                // Actions
                const changeTab = (tab) => {
                    haptic('light');
                    activeTab.value = tab;
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                };

                const openModal = (id) => {
                    haptic('light');
                    const p = products.value.find(x => x.id === id);
                    if (p) {
                        modal.value = { show: true, product: p };
                    }
                };

                const closeModal = () => {
                    modal.value.show = false;
                };

                const addToCart = (product) => {
                    haptic('medium');
                    cart.value.push(product);
                    showToast('âœ“ Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
                    closeModal();
                };

                const removeFromCart = (index) => {
                    haptic('light');
                    cart.value.splice(index, 1);
                };

                const buyDirect = () => {
                    haptic('heavy');
                    processing.value = true;
                    setTimeout(() => {
                        tg.sendData(modal.value.product.id);
                    }, 500);
                };

                const checkout = () => {
                    if (cart.value.length === 0) return;
                    haptic('heavy');
                    processing.value = true;
                    
                    setTimeout(() => {
                        if (cart.value.length === 1) {
                            tg.sendData(cart.value[0].id);
                        } else {
                            const payload = JSON.stringify({
                                type: 'cart_checkout',
                                items: cart.value.map(i => i.id),
                                total: cartTotal.value
                            });
                            tg.sendData(payload);
                        }
                    }, 600);
                };

                const getPrice = (id) => {
                    const product = products.value.find(p => p.id === id);
                    return product ? product.price : 0;
                };

                // Particles System
                const initParticles = () => {
                    const canvas = document.getElementById('particles');
                    const ctx = canvas.getContext('2d');
                    
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;

                    const particles = [];
                    const count = 80;

                    class Particle {
                        constructor() {
                            this.x = Math.random() * canvas.width;
                            this.y = Math.random() * canvas.height;
                            this.size = Math.random() * 2.5 + 0.5;
                            this.speedX = Math.random() * 0.6 - 0.3;
                            this.speedY = Math.random() * 0.6 - 0.3;
                            this.opacity = Math.random() * 0.6 + 0.2;
                        }

                        update() {
                            this.x += this.speedX;
                            this.y += this.speedY;
                            if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                            if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
                        }

                        draw() {
                            ctx.fillStyle = `rgba(139,92,246,${this.opacity})`;
                            ctx.beginPath();
                            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    }

                    for (let i = 0; i < count; i++) {
                        particles.push(new Particle());
                    }

                    function animate() {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        particles.forEach(p => {
                            p.update();
                            p.draw();
                        });
                        requestAnimationFrame(animate);
                    }

                    animate();

                    window.addEventListener('resize', () => {
                        canvas.width = window.innerWidth;
                        canvas.height = window.innerHeight;
                    });
                };

                // Initialize
                onMounted(() => {
                    tg.expand();
                    tg.setHeaderColor('#000000');
                    tg.setBackgroundColor('#000000');
                    tg.enableClosingConfirmation();

                    // Get user data
                    if (tg.initDataUnsafe?.user) {
                        user.value = tg.initDataUnsafe.user;
                        console.log('âœ… User loaded:', user.value);
                    } else {
                        console.warn('âš ï¸ No user data');
                        user.value = {
                            first_name: 'Ú©Ø§Ø±Ø¨Ø± Ù…Ù‡Ù…Ø§Ù†',
                            id: 'Guest',
                            photo_url: null
                        };
                    }

                    // Update prices from URL
                    const params = new URLSearchParams(window.location.search);
                    products.value.forEach(p => {
                        if (params.has(p.id)) {
                            const newPrice = parseInt(params.get(p.id), 10);
                            if (!isNaN(newPrice) && newPrice > 0) {
                                p.price = newPrice;
                            }
                        }
                    });

                    // Init particles
                    initParticles();

                    // Remove loading
                    setTimeout(() => {
                        loading.value = false;
                    }, 1000);
                });

                return {
                    loading,
                    processing,
                    activeTab,
                    selectedCategory,
                    user,
                    cart,
                    modal,
                    toast,
                    products,
                    categories,
                    filteredProducts,
                    cartTotal,
                    formatPrice,
                    handleAvatarError,
                    changeTab,
                    openModal,
                    closeModal,
                    addToCart,
                    removeFromCart,
                    buyDirect,
                    checkout,
                    getPrice
                };
            }
        }).mount('#app');
    </script>

</body>
</html>
